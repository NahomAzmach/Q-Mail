<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OAuth Configuration Error</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    <style>
        .code-block {
            background-color: #2c2c2c;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            overflow-wrap: break-word;
            word-wrap: break-word;
        }
        .step {
            margin-bottom: 1.5rem;
        }
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            background-color: var(--bs-primary);
            color: white;
            border-radius: 50%;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card border-danger">
                    <div class="card-header bg-danger text-white">
                        <h2 class="h4 mb-0">OAuth Configuration Error: Redirect URI Mismatch</h2>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-warning">
                            <strong>What happened?</strong> Google OAuth rejected the login because the redirect URI in your Google Cloud Console doesn't match the one this application is using.
                        </div>

                        <h4 class="mt-4">Current Redirect URI:</h4>
                        <div class="code-block mb-4 text-light">
                            {{ redirect_uri }}
                        </div>

                        <h4>How to Fix This:</h4>
                        
                        <div class="step">
                            <div class="step-number">1</div>
                            <strong>Go to the Google Cloud Console</strong>
                            <p>Visit the <a href="https://console.cloud.google.com/apis/credentials" target="_blank" class="text-info">Google Cloud Console Credentials page</a></p>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">2</div>
                            <strong>Find your OAuth 2.0 Client ID</strong>
                            <p>Look for the Client ID: <code>{{ client_id }}</code></p>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">3</div>
                            <strong>Add the Redirect URI</strong>
                            <p>Add the exact redirect URI shown above to the "Authorized redirect URIs" list</p>
                            <p>Make sure to click "Save" after adding the URI</p>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">4</div>
                            <strong>Try Again</strong>
                            <p>Return to the application and try logging in again</p>
                        </div>

                        <div class="alert alert-info mt-4">
                            <strong>Note:</strong> Replit generates a new domain each time the repl is started or reloaded. You may need to update the redirect URI in Google Cloud Console whenever the Replit URL changes.
                        </div>

                        <div class="text-center mt-4">
                            <a href="{{ url_for('index') }}" class="btn btn-primary">Return to Home Page</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>